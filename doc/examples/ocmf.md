# Open Charge Metering Format (OCMF)

[Signed Snapshots](snapshots.md) shows how to create and work with snapshots.
For each of them, the BSM-WS36A provides an additional representation in the
[Open Charge Metering Format
(OCMF)](https://github.com/SAFE-eV/OCMF-Open-Charge-Metering-Format).

The OCMF representation is generated from the actual snapshot data when reading
from the appropriate model. It contains a subset of the snapshot's information,
presents the same time information and response counter and gets signed individually.


## Snapshots and Their Associated OCMF Representation

Each line in the following table shows a snapshot with its associated OCMF
representation:

| Snapshot                 | Snapshot Model                                             | OCMF Representation           | OCMF Model                                             |
| ------------------------ | ---------------------------------------------------------- | ----------------------------- | ------------------------------------------------------ |
| Signed Current Snapshot  | [bsm\_snapshot](../../bauer_bsm/bsm/models/smdx_64901.xml) | OCMF Signed Current Snapshot  | [bsm\_ocmf](../../bauer_bsm/bsm/models/smdx_64903.xml) |
| Signed Turn-On Snapshot  | [bsm\_snapshot](../../bauer_bsm/bsm/models/smdx_64901.xml) | OCMF Signed Turn-On Snapshot  | [bsm\_ocmf](../../bauer_bsm/bsm/models/smdx_64903.xml) |
| Signed Turn-Off Snapshot | [bsm\_snapshot](../../bauer_bsm/bsm/models/smdx_64901.xml) | OCMF Signed Turn-Off Snapshot | [bsm\_ocmf](../../bauer_bsm/bsm/models/smdx_64903.xml) |
| Signed Start Snapshot    | [bsm\_snapshot](../../bauer_bsm/bsm/models/smdx_64901.xml) | OCMF Signed Start Snapshot    | [bsm\_ocmf](../../bauer_bsm/bsm/models/smdx_64903.xml) |
| Signed End Snapshot      | [bsm\_snapshot](../../bauer_bsm/bsm/models/smdx_64901.xml) | OCMF Signed End Snapshot      | [bsm\_ocmf](../../bauer_bsm/bsm/models/smdx_64903.xml) |

[Model Instances](modbus-interface.md#model-instances) shows these model
instances.


## Getting the OCMF Representation

Create the snapshot as shown in [Snapshot
Creation](snapshots.md#snapshot-creation) and just read its associated OCMF
model instance afterwards.


## Snapshot Data in OCMF

The OCMF representation includes
[_Meta1_](../../bauer_bsm/bsm/models/smdx_64901.xml#L31) as customer
identification data which needs to be set appropriately. The other metadata
fields are ignored and will not appear in OCMF output.

The BSM-WS36A uses the reference cumulative register (OBIS ID 1-0:1.8.0\*198,
data point RCR) as _RV_ for the energy consumption in OCMF output. This
register gets reset when creating a _Signed Turn-On State_ and shows the actual
energy consumption at the time of crating _Signed Turn-Off Snapshot_. The
positive active energy (OBIS ID 1-0:1.8.0\*255, data point _TotWhImp_) is
included for informational purpose as _XV_.


## Example

### Preparation

Set time and some meta data:
```
$ bsmtool set bsm/epoch=1609491600 bsm/tzo=60
$ bsmtool set 'bsm/meta1=chargeIT up 12*4, id: 12345678abcdef' 'bsm/meta2=demo data 2'
```
```
--> 2a 10 9d44 0003 06 5feee490003c d4b0
<-- 2a 10 9d44 0003 e9aa
--> 2a 10 9d57 0078 f0 63686172676549542075702031322a342c2069643a203132333435363738616263646566000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064656d6f206461746120320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 a4eb
<-- 2a 10 9d57 0078 584c
```

### Create Snapshot and Get OCMF Representation

- Trigger creating  _Signed Current Snapshot_ (not its OCMF representation)
    ```
    $ bsmtool create-snapshot scs
    ```
    ```
    --> 2a 10 9e4c 0001 02 0002 bca5
    <-- 2a 10 9e4c 0001 e9ed
    ```

- Poll snapshot status as shown in [Snapshot
  Creation](snapshots.md#snapshot-creation)


- When ready, read its OCMF representation from _OCMF Signed Current Snapshot_
    ```
    $ bsmtool get oscs
    bsm_ocmf:
        Typ: 0
        St: 0
        O: OCMF|{"FV":"1.0","GI":"BAUER Electronic BSM-WS36A-H01-1311-0000","GS":"001BZR1521070003","GV":"1.8:33C4:DB63, 08d1aa3","PG":"T22112","MV":"BAUER Electronic","MM":"BSM-WS36A-H01-1311-0000","MS":"001BZR1521070003","IS":true,"IT":"UNDEFINED","ID":"chargeIT up 12*4, id: 12345678abcdef","RD":[{"TM":"2021-01-01T10:00:19,000+0100 U","TX":"C","RV":150,"RI":"1-0:1.8.0*198","RU":"Wh","XV":88350,"XI":"1-0:1.8.0*255","XU":"Wh","XT":0,"RT":"AC","EF":"","ST":"G"}]}|{"SA":"ECDSA-secp256r1-SHA256","SD":"3045022051545e57634c9f7ad9b2c41b7766e3515f8506f410889f3d7ee525202bb00627022100af54246b45e2fb01d86d494366ef50576147245867df804f9d8442aa9b21477b"}
    ```
    ```
    --> 2a 03 a341 0002 b040
    <-- 2a 03 04 00000000 6131
    --> 2a 03 a343 007d 5060
    <-- 2a 03 fa 4f434d467c7b224656223a22312e30222c224749223a22424155455220456c656374726f6e69632042534d2d57533336412d4830312d313331312d30303030222c224753223a22303031425a5231353231303730303033222c224756223a22312e383a333343343a444236332c2030386431616133222c225047223a22543232313132222c224d56223a22424155455220456c656374726f6e6963222c224d4d223a2242534d2d57533336412d4830312d313331312d30303030222c224d53223a22303031425a5231353231303730303033222c224953223a747275652c224954223a22554e444546494e4544222c224944223a226368617267 0168
    --> 2a 03 a3c0 007d a188
    <-- 2a 03 fa 6549542075702031322a342c2069643a203132333435363738616263646566222c225244223a5b7b22544d223a22323032312d30312d30315431303a30303a31392c3030302b303130302055222c225458223a2243222c225256223a3135302c225249223a22312d303a312e382e302a313938222c225255223a225768222c225856223a38383335302c225849223a22312d303a312e382e302a323535222c225855223a225768222c225854223a302c225254223a224143222c224546223a22222c225354223a2247227d5d7d7c7b225341223a2245434453412d7365637032353672312d534841323536222c225344223a2233303435303232 4e2a
    --> 2a 03 a43d007d310c
    <-- 2a 03 fa 303531353435653537363334633966376164396232633431623737363665333531356638353036663431303838396633643765653532353230326262303036323730323231303061663534323436623435653266623031643836643439343336366566353035373631343732343538363764663830346639643834343261613962323134373762227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 052d
    --> 2a 03 a4ba 0079 80e6
    <-- 2a 03 f2 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 443c
    ```


## Comparing Snapshot and OCMF Payload

### _Signed Current Snapshot_

This is the regular snapshot data which could be read from the meter. Note that
it contains data for _Meta2_ which is not present in its OCMF representation.
```
$ bsmtool get scs
bsm_snapshot:
    fixed:
        Typ: 0
        St: 0
        RCR: 150 Wh
        TotWhImp: 88350 Wh
        W: 0.0 W
        MA1: 001BZR1521070003
        RCnt: 22112
        OS: 1856251 s
        Epoch: 1609491619 s
        TZO: 60 min
        EpochSetCnt: 12175
        EpochSetOS: 1856233 s
        DI: 1
        DO: 0
        Meta1: chargeIT up 12*4, id: 12345678abcdef
        Meta2: demo data 2
        Meta3: None
        Evt: 0
        NSig: 48
        BSig: 70
    repeating blocks blob:
        Sig: 304402203b7e79db592f2fc9aafaad6e125990a815b892e0d38746ca1c208d7ce3be457b02200edc7ca73f5d8ef4851909e83a1062327daf7ad6e2eabe4c4d815338b895847a
```
```
--> 2a 03 9e4b 0064 1dc4
<-- 2a 03 c8 00000000000000960001591e000000000001303031425a523135323130373030303300005660001c52fb5feee4a3003c00002f8f001c52e90001000063686172676549542075702031322a342c2069643a2031323334353637386162636465660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 8455
--> 2a 03 9eaf 007d 9c39
<-- 2a 03 fa 64656d6f206461746120320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300046304402203b7e79db592f2fc9aafaad6e125990a815b892e0d38746ca1c208d7ce3be457b02200edc7ca7 338a
--> 2a 03 9f2c 001b ec07
<-- 2a 03 36 3f5d8ef4851909e83a1062327daf7ad6e2eabe4c4d815338b895847a0000000000000000000000000000000000000000000000000000 65f6
```

### OCMF JSON Payload

This is its derived OCMF representation. To get a better view on the JSON
payload of the OCMF data, it could be pretty-printed using some shell tooling
and [`jq`](https://stedolan.github.io/jq/) as shown below.
```json
$ bsmtool get oscs/o | cut -d \| -f 2 | jq .
{
  "FV": "1.0",
  "GI": "BAUER Electronic BSM-WS36A-H01-1311-0000",
  "GS": "001BZR1521070003",
  "GV": "1.8:33C4:DB63, 08d1aa3",
  "PG": "T22112",
  "MV": "BAUER Electronic",
  "MM": "BSM-WS36A-H01-1311-0000",
  "MS": "001BZR1521070003",
  "IS": true,
  "IT": "UNDEFINED",
  "ID": "chargeIT up 12*4, id: 12345678abcdef",
  "RD": [
    {
      "TM": "2021-01-01T10:00:19,000+0100 U",
      "TX": "C",
      "RV": 150,
      "RI": "1-0:1.8.0*198",
      "RU": "Wh",
      "XV": 88350,
      "XI": "1-0:1.8.0*255",
      "XU": "Wh",
      "XT": 0,
      "RT": "AC",
      "EF": "",
      "ST": "G"
    }
  ]
}
```
The current draft of the [Open Charge Metering Format
Specification](https://github.com/SAFE-eV/OCMF-Open-Charge-Metering-Format/blob/176d59b7e4cf6eecbbdcbb056a08fdb201ed8ff5/OCMF-de.md#sektionen)
explains the standard keys used here. Reading value is the reference cumulative register _RCR_:
- _RV_: its actual value [_RCR_](../../bauer_bsm/bsm/models/smdx_64901.xml#L19)
- _RI_: _RCR_'s OBIS ID
- _RU_: _RCR_'s [unit](../../bauer_bsm/bsm/models/smdx_64901.xml#L19)

In addition, four vendor-specific keys are used in the reading data:
- _XV_: the additional total watt hours imported counter [_TotWhImp_](../../bauer_bsm/bsm/models/smdx_64901.xml#20)
- _XI_: _TotWhImp_'s OBIS ID
- _XU_: _TotWhImp_'s [unit](../../bauer_bsm/bsm/models/smdx_64901.xml#L20)
- _XT_: the underlying snapshot's type [_Typ_](../../bauer_bsm/bsm/models/smdx_64901.xml#L4)


## OCMF XML

In the context of electric vehicle charging, OCMF data gets usually validated
by a so-called Transparenzsoftware. There are several implementations at the
market and among them the [S.A.F.E. e.V.
Transparenzsoftware](https://www.safe-ev.de/de/transparenzsoftware.php) which
uses an XML envelope.

The XML envelope includes the OCMF data taken before starting and after
terminating the charging process along with the public key used for signing.
The format could be generated from a
[template](../../bauer_bsm/exporter/ocmf.py#L48) where the actual data gets
inserted.


### Generating OCMF XML

The [BSM Python support](../../bauer_bsm/exporter/ocmf.py#L12) and the [BSM
Tool](../../bauer_bsm/cli/bsmtool.py#L343) support the generation of OCMF XML
data for the OCMF representation of a pair of already created snapshots (the
switching snapshots _OCMF Signed Turn-On Snapshot_ and _OCMF Signed Turn-Off
Snapshot_ or the non-switching _OCMF Signed Start Snapshot_ and _OCMF Signed
End Snapshot_). To generate an OCMF XML envelope for the switching snapshots,
invoke the BSM Tool as follows:

- Create _Signed Turn-On Snapshot_
    ```
    $ bsmtool get-snapshot stons
    bsm_snapshot:
        fixed:
            Typ: 1
            St: 0
            RCR: None
            TotWhImp: 88200 Wh
            W: 0.0 W
            MA1: 001BZR1521070003
            RCnt: 22107
            OS: 1829766 s
            Epoch: 1602145359 s
            TZO: 120 min
            EpochSetCnt: 12174
            EpochSetOS: 1829734 s
            DI: 1
            DO: 0
            Meta1: chargeIT up 12*4, id: 12345678abcdef
            Meta2: demo data 2
            Meta3: None
            Evt: 0
            NSig: 48
            BSig: 71
        repeating blocks blob:
            Sig: 304502201a40c702753d715cc37e5aabbf706ed409e1aa01f8f19996b192a3276adecd72022100a4818e85690f00946c56569b92453ad9bf118fa3ae2a636629cdb8b89123f041
    ```
    ```
    --> 2a 10 9f4a 0001 02 0002 ac03
    <-- 2a 10 9f4a 0001 0810
    --> 2a 03 9f49 0064 bdf8
    <-- 2a 03 c8 000100000000000000015888000000000001303031425a52313532313037303030330000565b001beb865f7ecc4f007800002f8e001beb660001000063686172676549542075702031322a342c2069643a2031323334353637386162636465660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 3d9d
    --> 2a 03 9fad 007d 3c05
    <-- 2a 03 fa 64656d6f206461746120320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300047304502201a40c702753d715cc37e5aabbf706ed409e1aa01f8f19996b192a3276adecd72022100a4818e 2eb6
    --> 2a 03 a02a 001b 0012
    <-- 2a 03 36 85690f00946c56569b92453ad9bf118fa3ae2a636629cdb8b89123f04100000000000000000000000000000000000000000000000000 1ba4
    ```

- Create _Signed Turn-Off Snapshot_
    ```
    $ bsmtool get-snapshot stoffs
    bsm_snapshot:
        fixed:
            Typ: 2
            St: 0
            RCR: 150 Wh
            TotWhImp: 88350 Wh
            W: 0.0 W
            MA1: 001BZR1521070003
            RCnt: 22108
            OS: 1830064 s
            Epoch: 1602145657 s
            TZO: 120 min
            EpochSetCnt: 12174
            EpochSetOS: 1829734 s
            DI: 1
            DO: 0
            Meta1: chargeIT up 12*4, id: 12345678abcdef
            Meta2: demo data 2
            Meta3: None
            Evt: 0
            NSig: 48
            BSig: 71
        repeating blocks blob:
            Sig: 3045022100d7070dc074c9188ec1b957cb7a6b3a37d0c416b3c9f9eb49c01087c4a95e16e9022025aaee48fa55f93ed507d7565458fdfa118b1aa73632055401a9e324e1f28a20
    ```
    ```
    --> 2a 10 a048 0001 02 0002 62e2
    <-- 2a 10 a048 0001 a5c4
    --> 2a 03 a047 0064 d02f
    <-- 2a 03 c8 00020000000000960001591e000000000001303031425a52313532313037303030330000565c001becb05f7ecd79007800002f8e001beb660001000063686172676549542075702031322a342c2069643a2031323334353637386162636465660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 1dd7
    --> 2a 03 a0ab 007d d010
    <-- 2a 03 fa 64656d6f2064617461203200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000473045022100d7070dc074c9188ec1b957cb7a6b3a37d0c416b3c9f9eb49c01087c4a95e16e9022025aaee df95
    --> 2a 03 a128 001b a02e
    <-- 2a 03 36 48fa55f93ed507d7565458fdfa118b1aa73632055401a9e324e1f28a2000000000000000000000000000000000000000000000000000 c57e
    ```

- Generate OCMF XML envelope for both snapshots by reading both OCMF instances and wrapping them
    ```xml
    $ bsmtool ocmf-xml ostons ostoffs
    <?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>
    <values>
      <value transactionId="1" context="Transaction.Begin">
        <signedData format="OCMF" encoding="plain">OCMF|{"FV":"1.0","GI":"BAUER Electronic BSM-WS36A-H01-1311-0000","GS":"001BZR1521070003","GV":"1.8:33C4:DB63, 08d1aa3","PG":"T22107","MV":"BAUER Electronic","MM":"BSM-WS36A-H01-1311-0000","MS":"001BZR1521070003","IS":true,"IT":"UNDEFINED","ID":"chargeIT up 12*4, id: 12345678abcdef","RD":[{"TM":"2020-10-08T10:22:39,000+0200 S","TX":"B","RV":0,"RI":"1-0:1.8.0*198","RU":"Wh","XV":88200,"XI":"1-0:1.8.0*255","XU":"Wh","XT":1,"RT":"AC","EF":"","ST":"G"}]}|{"SA":"ECDSA-secp256r1-SHA256","SD":"3045022005ce3f8aca29050cd9ca44faddb37dad3794d9c4dce701bd63aa4dc29f266334022100d1c231f870e7f815e037bc6ff8accc69f9fcf783d2fb9e90c88fd1c9bd20fd4b"}</signedData>
        <publicKey encoding="plain">3059301306072a8648ce3d020106082a8648ce3d030107034200044bfd02c1d85272ceea9977db26d72cc401d9e5602faeee7ec7b6b62f9c0cce34ad8d345d5ac0e8f65deb5ff0bb402b1b87926bd1b7fc2dbc3a9774e8e70c7254</publicKey>
      </value>
      <value transactionId="1" context="Transaction.End">
        <signedData format="OCMF" encoding="plain">OCMF|{"FV":"1.0","GI":"BAUER Electronic BSM-WS36A-H01-1311-0000","GS":"001BZR1521070003","GV":"1.8:33C4:DB63, 08d1aa3","PG":"T22108","MV":"BAUER Electronic","MM":"BSM-WS36A-H01-1311-0000","MS":"001BZR1521070003","IS":true,"IT":"UNDEFINED","ID":"chargeIT up 12*4, id: 12345678abcdef","RD":[{"TM":"2020-10-08T10:27:37,000+0200 S","TX":"E","RV":150,"RI":"1-0:1.8.0*198","RU":"Wh","XV":88350,"XI":"1-0:1.8.0*255","XU":"Wh","XT":2,"RT":"AC","EF":"","ST":"G"}]}|{"SA":"ECDSA-secp256r1-SHA256","SD":"3046022100fa544eb800c940b30a87d2c075a0797e5089092b77a47f76433e63cb06c8832d022100e0e3c8370e19b8ef4caf295e3f676b43b12e092507ee81edc8cc7b9b2c9569bb"}</signedData>
        <publicKey encoding="plain">3059301306072a8648ce3d020106082a8648ce3d030107034200044bfd02c1d85272ceea9977db26d72cc401d9e5602faeee7ec7b6b62f9c0cce34ad8d345d5ac0e8f65deb5ff0bb402b1b87926bd1b7fc2dbc3a9774e8e70c7254</publicKey>
      </value>
    </values>
    ```
    ```
    --> 2a 03 9d07 0050 dd80
    <-- 2a 03 a0 30303030303030303231303730303033000000000000000030303062353730303030363063616166312e383a333343343a4442363300000030386431616133000000000000000000303031425a52313532313037303030334630303844310000000000000000000000000096000000001a5a00005660001c5d9f5feeef47003c00002f8f001c52e900010000001becaa5f7ecd730078001becaa5f7ecd730078 dadc
    --> 2a 03 9d57 0078 dd8f
    <-- 2a 03 f0 63686172676549542075702031322a342c2069643a203132333435363738616263646566000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064656d6f206461746120320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 f371
    --> 2a 03 9dcf 0064 5da9
    <-- 2a 03 c8 000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030005b3059301306072a8648ce3d020106082a8648ce3d030107034200044bfd02c1d85272ceea9977db26d72cc401d9e5602faeee7ec7b6b62f9c0cce34ad8d345d5ac0e8f65deb5ff0bb402b1b87926bd1b7fc2dbc3a9774e8e70c72540000000000 3c73
    --> 2a 03 a535 0002 f0d2
    <-- 2a 03 04 00010000 30f1
    --> 2a 03 a537 007d 10f2
    <-- 2a 03 fa 4f434d467c7b224656223a22312e30222c224749223a22424155455220456c656374726f6e69632042534d2d57533336412d4830312d313331312d30303030222c224753223a22303031425a5231353231303730303033222c224756223a22312e383a333343343a444236332c2030386431616133222c225047223a22543232313037222c224d56223a22424155455220456c656374726f6e6963222c224d4d223a2242534d2d57533336412d4830312d313331312d30303030222c224d53223a22303031425a5231353231303730303033222c224953223a747275652c224954223a22554e444546494e4544222c224944223a226368617267 09c7
    --> 2a 03 a5b4 007d e11a
    <-- 2a 03 fa 6549542075702031322a342c2069643a203132333435363738616263646566222c225244223a5b7b22544d223a22323032302d31302d30385431303a32323a33392c3030302b303230302053222c225458223a2242222c225256223a302c225249223a22312d303a312e382e302a313938222c225255223a225768222c225856223a38383230302c225849223a22312d303a312e382e302a323535222c225855223a225768222c225854223a312c225254223a224143222c224546223a22222c225354223a2247227d5d7d7c7b225341223a2245434453412d7365637032353672312d534841323536222c225344223a22333034353032323030 7d57
    --> 2a 03 a631 007d f0b7
    <-- 2a 03 fa 35636533663861636132393035306364396361343466616464623337646164333739346439633464636537303162643633616134646332396632363633333430323231303064316332333166383730653766383135653033376263366666386163636336396639666366373833643266623965393063383866643163396264323066643462227d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 3158
    --> 2a 03 a6ae 0079 c15a
    <-- 2a 03 f2 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 443c
    --> 2a 03 a729 0002 30ac
    <-- 2a 03 04 00020000 c0f1
    --> 2a 03 a72b 007d d08c
    <-- 2a 03 fa 4f434d467c7b224656223a22312e30222c224749223a22424155455220456c656374726f6e69632042534d2d57533336412d4830312d313331312d30303030222c224753223a22303031425a5231353231303730303033222c224756223a22312e383a333343343a444236332c2030386431616133222c225047223a22543232313038222c224d56223a22424155455220456c656374726f6e6963222c224d4d223a2242534d2d57533336412d4830312d313331312d30303030222c224d53223a22303031425a5231353231303730303033222c224953223a747275652c224954223a22554e444546494e4544222c224944223a226368617267 4687
    --> 2a 03 a7a8 007d 2164
    <-- 2a 03 fa 6549542075702031322a342c2069643a203132333435363738616263646566222c225244223a5b7b22544d223a22323032302d31302d30385431303a32373a33372c3030302b303230302053222c225458223a2245222c225256223a3135302c225249223a22312d303a312e382e302a313938222c225255223a225768222c225856223a38383335302c225849223a22312d303a312e382e302a323535222c225855223a225768222c225854223a322c225254223a224143222c224546223a22222c225354223a2247227d5d7d7c7b225341223a2245434453412d7365637032353672312d534841323536222c225344223a2233303436303232 9961
    --> 2a 03 a825 007d b25b
    <-- 2a 03 fa 3130306661353434656238303063393430623330613837643263303735613037393765353038393039326237376134376637363433336536336362303663383833326430323231303065306533633833373065313962386566346361663239356533663637366234336231326530393235303765653831656463386363376239623263393536396262227d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 e2cf
    --> 2a 03 a8a2 0079 03b1
    <-- 2a 03 f2 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 443c
    ```


### Example OCMF XML Payload

- Start
    ```json
    {
      "FV": "1.0",
      "GI": "BAUER Electronic BSM-WS36A-H01-1311-0000",
      "GS": "001BZR1521070003",
      "GV": "1.8:33C4:DB63, 08d1aa3",
      "PG": "T22107",
      "MV": "BAUER Electronic",
      "MM": "BSM-WS36A-H01-1311-0000",
      "MS": "001BZR1521070003",
      "IS": true,
      "IT": "UNDEFINED",
      "ID": "chargeIT up 12*4, id: 12345678abcdef",
      "RD": [
        {
          "TM": "2020-10-08T10:22:39,000+0200 S",
          "TX": "B",
          "RV": 0,
          "RI": "1-0:1.8.0*198",
          "RU": "Wh",
          "XV": 88200,
          "XI": "1-0:1.8.0*255",
          "XU": "Wh",
          "XT": 1,
          "RT": "AC",
          "EF": "",
          "ST": "G"
        }
      ]
    }
    ```

- End
    ```json
    {
      "FV": "1.0",
      "GI": "BAUER Electronic BSM-WS36A-H01-1311-0000",
      "GS": "001BZR1521070003",
      "GV": "1.8:33C4:DB63, 08d1aa3",
      "PG": "T22108",
      "MV": "BAUER Electronic",
      "MM": "BSM-WS36A-H01-1311-0000",
      "MS": "001BZR1521070003",
      "IS": true,
      "IT": "UNDEFINED",
      "ID": "chargeIT up 12*4, id: 12345678abcdef",
      "RD": [
        {
          "TM": "2020-10-08T10:27:37,000+0200 S",
          "TX": "E",
          "RV": 150,
          "RI": "1-0:1.8.0*198",
          "RU": "Wh",
          "XV": 88350,
          "XI": "1-0:1.8.0*255",
          "XU": "Wh",
          "XT": 2,
          "RT": "AC",
          "EF": "",
          "ST": "G"
        }
      ]
    }
    ```


### OCMF XML Verification

The OCMF XML envelope [`ev-charging-ocmf.xml`](data/ev-charging-ocmf.xml) from
the example above can be verified with the [S.A.F.E. e.V.
Transparenzsoftware](https://www.safe-ev.de/de/transparenzsoftware.php) which
by loading the file and clicking on _Transaktion überprüfen_:

![S.A.F.E. e.V. Transparenzsoftware Main Window](img/ev-charging-verification-overview.png)
![S.A.F.E. e.V. Transparenzsoftware Verification Details](img/ev-charging-verification-detail.png)
